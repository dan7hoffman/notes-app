<div class="notes-container">
  <h2>My Notes</h2>
  <p>Total Notes: {{ noteCount$ | async }}</p>
  <p>Active Notes: {{ activeNoteCount$ | async }}</p>
  <p>Deleted Notes: {{ deletedNoteCount$ | async }}</p>

  <form (ngSubmit)="addOrUpdate()" #noteForm="ngForm">
    <input
      type="text"
      placeholder="Enter Note Title"
      [(ngModel)]="newTitle"
      name="title"
      required
    />
    <textarea
      placeholder="Enter note content..."
      [(ngModel)]="newContent"
      name="content"
    ></textarea>

    <button type="submit" [disabled]="!noteForm.valid">
      {{ editingNote ? 'Update Note' : 'Add Note' }}
    </button>
    <button type="button" *ngIf="editingNote" (click)="cancelEdit()">Cancel</button>
  </form>

  <div class="note" *ngFor="let note of notes$ | async">
    <h3>{{ note.title }}</h3>
    <p>{{ note.content }}</p>
    <small>Created at: {{ note.createdAt | date:'short' }}</small>
    <br />
    <small>Last modified at: {{ note.lastModifiedAt | date:'short' }}</small>
    <br />
    <small>Deleted at: {{ note.deletionAt | date:'short' }}</small>
    <br />
    <small>Deleted: {{ note.deleted ? 'Yes' : 'No' }}</small>
    <div class="actions">
      <button (click)="edit(note)">Edit</button>
      <button (click)="softDelete(note.id)">Soft Delete</button>
      <button (click)="hardDelete(note.id)">Hard Delete</button>
    </div>
  </div>
</div>
